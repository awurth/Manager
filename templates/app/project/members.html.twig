{% extends 'app/project/layout.html.twig' %}

{% block page_content %}
  <h1 class="pb-3 mb-4 border-b border-gray-300 text-2xl font-bold">Membres</h1>
  {{ form_start(form) }}
    {{ form_row(form.user) }}
    {{ form_row(form.accessLevel) }}
    {{ form_rest(form) }}
    <button type="submit" class="inline-block px-4 py-2 bg-green-600 hover:bg-green-700 rounded text-white mt-4">
      Ajouter !
    </button>
  {{ form_end(form) }}
  <h2 class="mb-3 mt-6 text-lg font-bold">Membres existants</h2>
  {% if project.members|length %}
    <ul class="list-disc list-inside">
      {% for member in project.members %}
        <li class="mb-4">
          <strong>{{ member.user.email }}</strong>
          <small class="border rounded p-1 ml-2 text-gray-700">{{ member|access_level_label }}</small>
          {% if member.accessLevel != constant('App\\Entity\\ProjectMember::ACCESS_LEVEL_OWNER') %}
            <a class="p-2 ml-2 bg-red-600 hover:bg-red-700 rounded text-xs text-white" href="{{ path('app_project_member_remove', { slug: project.slug, id: member.id }) }}">
              <i class="fas fa-trash"></i>
            </a>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% endif %}
{% endblock %}
